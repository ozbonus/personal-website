---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import { formatDate } from "../scripts/format_date.js";
import PostCardTag from "./PostCardTag.astro";

interface Props {
  post: CollectionEntry<"posts">;
}

const { post } = Astro.props;
const { title, pubDate, description, tags } = post.data;

const url = `/posts/${post.id}/`;
const coverSrc = post.data.cover;
const coverAlt = post.data.alt;
const formattedDate = formatDate(pubDate);
---

<div
  class="shadow-brutal-8 shadow-stone-950w border-4 border-stone-950 bg-white transition-transform ease-out hover:scale-y-105 hover:shadow-cyan-600 dark:bg-slate-700 dark:hover:shadow-amber-500">
  <a href={url}>
    <Image class="" src={coverSrc} alt={coverAlt} />
  </a>
  <div class="p-5">
    <a href={url}>
      <h2
        class="mb-2 text-3xl font-bold tracking-wide text-gray-900 underline decoration-sky-600 decoration-4 dark:text-white dark:no-underline">
        {title}
      </h2>
      <div class="m-auto mb-0 flex flex-wrap">
        {tags.map((tag: string) => <PostCardTag tag={tag} />)}
      </div>
      <p class="mb-3 text-xl font-normal text-gray-700 dark:text-gray-200">
        {description}
      </p>
      <p class="font-normal tracking-wide text-gray-400 dark:text-sky-200">
        {formattedDate}
      </p>
    </a>
  </div>
</div>
